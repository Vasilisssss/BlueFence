<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bluebird Fence - Professional Quote Form</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#1e3c72">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            min-height: 100vh;
        }

        .header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 2rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="fence" patternUnits="userSpaceOnUse" width="20" height="20"><rect width="20" height="20" fill="none"/><rect x="8" y="0" width="4" height="20" fill="rgba(255,255,255,0.1)"/></pattern></defs><rect width="100" height="100" fill="url(%23fence)"/></svg>');
            animation: float 20s ease-in-out infinite;
            z-index: 1;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(1deg); }
        }

        .header-content {
            position: relative;
            z-index: 2;
        }

        .logo {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            margin: 0 auto 1rem;
            border: 3px solid white;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .company-name {
            font-family: 'Montserrat', sans-serif;
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .tagline {
            font-size: 1.1rem;
            opacity: 0.9;
            font-style: italic;
        }

        .form-container {
            padding: 2rem;
        }

        .section {
            margin-bottom: 2rem;
            padding: 1.5rem;
            border: 2px solid #e1e8ed;
            border-radius: 12px;
            background: linear-gradient(145deg, #f8fbff 0%, #e8f4fd 100%);
            transition: all 0.3s ease;
        }

        .section:hover {
            border-color: #1e3c72;
            box-shadow: 0 5px 15px rgba(30, 60, 114, 0.1);
        }

        .section-title {
            color: #1e3c72;
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #1e3c72;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .section-title::before {
            content: 'üèóÔ∏è';
            font-size: 1.2rem;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .form-row.three-col {
            grid-template-columns: 1fr 1fr 1fr;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #2c3e50;
        }

        input, select, textarea {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: white;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #1e3c72;
            box-shadow: 0 0 0 3px rgba(30, 60, 114, 0.1);
            transform: translateY(-1px);
        }

        textarea {
            resize: vertical;
            min-height: 100px;
        }

        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 0.5rem;
            margin-top: 0.5rem;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            padding: 0.5rem;
            background: white;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .checkbox-item:hover {
            border-color: #1e3c72;
            background: #f8fbff;
        }

        .checkbox-item input[type="checkbox"] {
            width: auto;
            margin-right: 0.5rem;
            transform: scale(1.2);
        }

        .fence-styles {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .fence-option {
            border: 2px solid #e1e8ed;
            border-radius: 12px;
            padding: 1rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
        }

        .fence-option:hover {
            border-color: #1e3c72;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .fence-option.selected {
            border-color: #1e3c72;
            background: linear-gradient(145deg, #f8fbff 0%, #e8f4fd 100%);
        }

        .fence-option img {
            width: 100%;
            height: 150px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 0.5rem;
        }

        .fence-option h4 {
            color: #1e3c72;
            margin-bottom: 0.5rem;
        }

        .fence-option input[type="radio"] {
            margin-top: 0.5rem;
            transform: scale(1.3);
        }

        .drawing-section {
            background: linear-gradient(145deg, #fff9e6 0%, #f0f8ff 100%);
            border: 2px solid #ffd700;
        }

        .drawing-section .section-title::before {
            content: '‚úèÔ∏è';
        }

        .canvas-container {
            position: relative;
            border: 3px solid #1e3c72;
            border-radius: 12px;
            background: white;
            margin: 1rem 0;
            overflow: hidden;
        }

        .drawing-toolbar {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
            padding: 1rem;
            background: linear-gradient(145deg, #f0f8ff 0%, #e8f4fd 100%);
            border-radius: 8px;
            flex-wrap: wrap;
            align-items: center;
        }

        .tool-btn {
            padding: 0.5rem 1rem;
            border: 2px solid #1e3c72;
            background: white;
            color: #1e3c72;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .tool-btn:hover {
            background: #1e3c72;
            color: white;
            transform: translateY(-1px);
        }

        .tool-btn.active {
            background: #1e3c72;
            color: white;
        }

        .color-picker {
            width: 40px;
            height: 40px;
            border: 2px solid #1e3c72;
            border-radius: 6px;
            cursor: pointer;
        }

        .line-width-control {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .line-width-control input {
            width: 60px;
        }

        canvas {
            display: block;
            cursor: crosshair;
        }

        .signature-section {
            background: linear-gradient(145deg, #f0fff0 0%, #e8f5e8 100%);
            border: 2px solid #28a745;
        }

        .signature-section .section-title::before {
            content: '‚úçÔ∏è';
        }

        .signature-canvas-container {
            position: relative;
            border: 2px solid #28a745;
            border-radius: 8px;
            background: white;
            margin: 1rem 0;
        }

        .signature-canvas-container canvas {
            display: block;
        }

        .signature-clear {
            margin-top: 0.5rem;
            padding: 0.5rem 1rem;
            background: #dc3545;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .signature-clear:hover {
            background: #c82333;
            transform: translateY(-1px);
        }

        .total-section {
            background: linear-gradient(145deg, #fff0f5 0%, #f8f9fa 100%);
            border: 3px solid #28a745;
            text-align: center;
        }

        .total-section .section-title::before {
            content: 'üí∞';
        }

        .total-amount {
            font-size: 2rem;
            font-weight: bold;
            color: #28a745;
            margin: 1rem 0;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }

        .submit-btn {
            width: 100%;
            padding: 1rem 2rem;
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 2rem;
            box-shadow: 0 4px 15px rgba(40, 167, 69, 0.3);
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(40, 167, 69, 0.4);
        }

        .submit-btn:active {
            transform: translateY(0);
        }

        @media (max-width: 768px) {
            .container {
                margin: 0;
                box-shadow: none;
            }

            .header {
                padding: 1.5rem;
            }

            .company-name {
                font-size: 2rem;
            }

            .form-container {
                padding: 1rem;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .form-row.three-col {
                grid-template-columns: 1fr;
            }

            .fence-styles {
                grid-template-columns: 1fr;
            }

            .drawing-toolbar {
                flex-direction: column;
                align-items: stretch;
            }

            .tool-btn {
                text-align: center;
            }
        }

        @media print {
            * { background-color: #f5f5f5 !important; }
            body { background: #f5f5f5 !important; }
            input, select, textarea, canvas { background-color: white !important; }
            
            body {
                font-size: 12px;
                line-height: 1.4;
                color: #000;
            }

            .container {
                max-width: none;
                box-shadow: none;
                margin: 0;
                padding: 0;
            }

            .header {
                background: #f5f5f5 !important;
                color: #000 !important;
                padding: 1rem;
                page-break-after: avoid;
            }

            .company-name {
                font-size: 1.5rem;
                color: #000 !important;
                text-shadow: none;
            }

            .tagline {
                color: #000 !important;
            }

            .form-container {
                padding: 1rem;
            }

            .section {
                margin-bottom: 1rem;
                padding: 0.5rem;
                border: 1px solid #000;
                page-break-inside: avoid;
                background: #f5f5f5 !important;
            }

            .section-title {
                font-size: 1rem;
                color: #000 !important;
                border-bottom: 1px solid #000;
            }

            .drawing-toolbar {
                display: none !important;
            }

            .signature-clear {
                display: none !important;
            }

            .submit-btn {
                display: none !important;
            }

            input, select, textarea {
                border: 1px solid #000;
                padding: 0.25rem;
                font-size: 11px;
                background: white !important;
            }

            .canvas-container, .signature-canvas-container {
                border: 1px solid #000;
                background: white !important;
            }

            .fence-option {
                border: 1px solid #000;
                padding: 0.5rem;
                background: white !important;
            }

            .fence-option img {
                height: 100px;
            }

            .total-amount {
                font-size: 1.2rem;
                color: #000 !important;
            }

            .checkbox-item {
                border: 1px solid #000;
                background: white !important;
            }

            @page {
                margin: 0.5in;
                size: letter;
            }

            .page-break {
                page-break-before: always;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="header-content">
                <img src="logo.jpg" alt="Bluebird Fence Logo" class="logo">
                <h1 class="company-name">Bluebird Fence</h1>
                <p class="tagline">Building Quality Fences Since 1985</p>
            </div>
        </div>

        <div class="form-container">
            <form id="quoteForm">
                <!-- Customer Information -->
                <div class="section">
                    <h2 class="section-title">Customer Information</h2>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="firstName">First Name *</label>
                            <input type="text" id="firstName" name="firstName" required>
                        </div>
                        <div class="form-group">
                            <label for="lastName">Last Name *</label>
                            <input type="text" id="lastName" name="lastName" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="email">Email Address *</label>
                            <input type="email" id="email" name="email" required>
                        </div>
                        <div class="form-group">
                            <label for="phone">Phone Number *</label>
                            <input type="tel" id="phone" name="phone" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="address">Property Address *</label>
                        <textarea id="address" name="address" required placeholder="Enter the complete address where the fence will be installed"></textarea>
                    </div>
                </div>

                <!-- Project Details -->
                <div class="section">
                    <h2 class="section-title">Project Details</h2>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="fenceHeight">Fence Height *</label>
                            <select id="fenceHeight" name="fenceHeight" required>
                                <option value="">Select Height</option>
                                <option value="3ft">3 feet</option>
                                <option value="4ft">4 feet</option>
                                <option value="5ft">5 feet</option>
                                <option value="6ft">6 feet</option>
                                <option value="8ft">8 feet</option>
                                <option value="custom">Custom Height</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="linearFeet">Estimated Linear Feet *</label>
                            <input type="number" id="linearFeet" name="linearFeet" required min="1" placeholder="e.g., 150">
                        </div>
                    </div>
                    <div class="form-row three-col">
                        <div class="form-group">
                            <label for="gates">Number of Gates</label>
                            <input type="number" id="gates" name="gates" min="0" value="0">
                        </div>
                        <div class="form-group">
                            <label for="gateWidth">Gate Width (if applicable)</label>
                            <select id="gateWidth" name="gateWidth">
                                <option value="">Select Width</option>
                                <option value="3ft">3 feet</option>
                                <option value="4ft">4 feet</option>
                                <option value="5ft">5 feet</option>
                                <option value="6ft">6 feet</option>
                                <option value="8ft">8 feet (Double)</option>
                                <option value="10ft">10 feet (Double)</option>
                                <option value="12ft">12 feet (Double)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="corners">Number of Corners</label>
                            <input type="number" id="corners" name="corners" min="0" value="0">
                        </div>
                    </div>
                </div>

                <!-- Fence Style Selection -->
                <div class="section">
                    <h2 class="section-title">Fence Style Selection</h2>
                    <div class="fence-styles">
                        <!-- Wood Options -->
                        <div class="fence-option" onclick="selectFenceStyle('wood-privacy')">
                            <img src="images/wood-stockade.png" alt="Wood Privacy Fence">
                            <h4>Wood Privacy - Stockade</h4>
                            <p>Classic cedar stockade privacy fence</p>
                            <input type="radio" name="fenceStyle" value="wood-privacy" id="wood-privacy">
                        </div>
                        
                        <div class="fence-option" onclick="selectFenceStyle('wood-tongue-groove')">
                            <img src="images/wood-tongue-groove.png" alt="Wood Tongue & Groove">
                            <h4>Wood Tongue & Groove</h4>
                            <p>Premium tongue and groove privacy</p>
                            <input type="radio" name="fenceStyle" value="wood-tongue-groove" id="wood-tongue-groove">
                        </div>

                        <div class="fence-option" onclick="selectFenceStyle('wood-horizontal')">
                            <img src="images/wood-horizontal-boards.png" alt="Wood Horizontal Boards">
                            <h4>Wood Horizontal Boards</h4>
                            <p>Modern horizontal board design</p>
                            <input type="radio" name="fenceStyle" value="wood-horizontal" id="wood-horizontal">
                        </div>

                        <div class="fence-option" onclick="selectFenceStyle('wood-universal-privacy')">
                            <img src="images/wood-universal-privacy.png" alt="Wood Universal Privacy">
                            <h4>Wood Universal Privacy</h4>
                            <p>Versatile privacy fence design</p>
                            <input type="radio" name="fenceStyle" value="wood-universal-privacy" id="wood-universal-privacy">
                        </div>

                        <div class="fence-option" onclick="selectFenceStyle('wood-privacy-lattice')">
                            <img src="images/wood-privacy-lattice.png" alt="Wood Privacy with Lattice">
                            <h4>Wood Privacy with Lattice</h4>
                            <p>Privacy fence with decorative lattice top</p>
                            <input type="radio" name="fenceStyle" value="wood-privacy-lattice" id="wood-privacy-lattice">
                        </div>

                        <div class="fence-option" onclick="selectFenceStyle('wood-lattice')">
                            <img src="images/wood-lattice.png" alt="Wood Lattice">
                            <h4>Wood Lattice</h4>
                            <p>Full lattice design for partial privacy</p>
                            <input type="radio" name="fenceStyle" value="wood-lattice" id="wood-lattice">
                        </div>

                        <div class="fence-option" onclick="selectFenceStyle('wood-closed-baluster')">
                            <img src="images/wood-closed-top-baluster.png" alt="Wood Closed Top Baluster">
                            <h4>Wood Closed Top Baluster</h4>
                            <p>Traditional baluster with closed top rail</p>
                            <input type="radio" name="fenceStyle" value="wood-closed-baluster" id="wood-closed-baluster">
                        </div>

                        <div class="fence-option" onclick="selectFenceStyle('wood-open-baluster')">
                            <img src="images/wood-open-top-baluster.png" alt="Wood Open Top Baluster">
                            <h4>Wood Open Top Baluster</h4>
                            <p>Open baluster design with top rail</p>
                            <input type="radio" name="fenceStyle" value="wood-open-baluster" id="wood-open-baluster">
                        </div>

                        <div class="fence-option" onclick="selectFenceStyle('wood-scalloped')">
                            <img src="images/wood-traditional-scalloped.png" alt="Wood Traditional Scalloped">
                            <h4>Wood Traditional Scalloped</h4>
                            <p>Classic scalloped picket fence</p>
                            <input type="radio" name="fenceStyle" value="wood-scalloped" id="wood-scalloped">
                        </div>

                        <!-- Vinyl Options -->
                        <div class="fence-option" onclick="selectFenceStyle('vinyl-solid-privacy')">
                            <img src="images/vinyl-solid-privacy.png" alt="Vinyl Solid Privacy">
                            <h4>Vinyl Solid Privacy</h4>
                            <p>Maintenance-free solid privacy fence</p>
                            <input type="radio" name="fenceStyle" value="vinyl-solid-privacy" id="vinyl-solid-privacy">
                        </div>

                        <div class="fence-option" onclick="selectFenceStyle('vinyl-semi-privacy')">
                            <img src="images/vinyl-semi-privacy.png" alt="Vinyl Semi-Privacy">
                            <h4>Vinyl Semi-Privacy</h4>
                            <p>Semi-private vinyl with spacing</p>
                            <input type="radio" name="fenceStyle" value="vinyl-semi-privacy" id="vinyl-semi-privacy">
                        </div>

                        <div class="fence-option" onclick="selectFenceStyle('vinyl-privacy-lattice')">
                            <img src="images/vinyl-privacy-lattice.png" alt="Vinyl Privacy with Lattice">
                            <h4>Vinyl Privacy with Lattice</h4>
                            <p>Privacy fence with lattice accent</p>
                            <input type="radio" name="fenceStyle" value="vinyl-privacy-lattice" id="vinyl-privacy-lattice">
                        </div>

                        <div class="fence-option" onclick="selectFenceStyle('vinyl-privacy-mini-lattice')">
                            <img src="images/vinyl-privacy-mini-lattice.png" alt="Vinyl Privacy Mini Lattice">
                            <h4>Vinyl Privacy Mini Lattice</h4>
                            <p>Privacy with mini lattice detail</p>
                            <input type="radio" name="fenceStyle" value="vinyl-privacy-mini-lattice" id="vinyl-privacy-mini-lattice">
                        </div>

                        <div class="fence-option" onclick="selectFenceStyle('vinyl-privacy-baluster')">
                            <img src="images/vinyl-privacy-baluster.png" alt="Vinyl Privacy Baluster">
                            <h4>Vinyl Privacy Baluster</h4>
                            <p>Privacy fence with baluster accent</p>
                            <input type="radio" name="fenceStyle" value="vinyl-privacy-baluster" id="vinyl-privacy-baluster">
                        </div>

                        <div class="fence-option" onclick="selectFenceStyle('vinyl-lattice')">
                            <img src="images/vinyl-lattice.png" alt="Vinyl Lattice">
                            <h4>Vinyl Lattice</h4>
                            <p>Full vinyl lattice design</p>
                            <input type="radio" name="fenceStyle" value="vinyl-lattice" id="vinyl-lattice">
                        </div>

                        <div class="fence-option" onclick="selectFenceStyle('vinyl-closed-baluster')">
                            <img src="images/vinyl-closed-top-baluster.png" alt="Vinyl Closed Top Baluster">
                            <h4>Vinyl Closed Top Baluster</h4>
                            <p>Closed top baluster design</p>
                            <input type="radio" name="fenceStyle" value="vinyl-closed-baluster" id="vinyl-closed-baluster">
                        </div>

                        <div class="fence-option" onclick="selectFenceStyle('vinyl-scalloped-baluster')">
                            <img src="images/vinyl-scalloped-baluster.png" alt="Vinyl Scalloped Baluster">
                            <h4>Vinyl Scalloped Baluster</h4>
                            <p>Decorative scalloped baluster</p>
                            <input type="radio" name="fenceStyle" value="vinyl-scalloped-baluster" id="vinyl-scalloped-baluster">
                        </div>

                        <div class="fence-option" onclick="selectFenceStyle('vinyl-straight-baluster-arbor')">
                            <img src="images/vinyl-straight-top-baluster-arbor.png" alt="Vinyl Straight Top Baluster Arbor">
                            <h4>Vinyl Straight Baluster Arbor</h4>
                            <p>Straight baluster with arbor accent</p>
                            <input type="radio" name="fenceStyle" value="vinyl-straight-baluster-arbor" id="vinyl-straight-baluster-arbor">
                        </div>

                        <div class="fence-option" onclick="selectFenceStyle('vinyl-pergola')">
                            <img src="images/vinyl-pergola.png" alt="Vinyl Pergola">
                            <h4>Vinyl Pergola</h4>
                            <p>Decorative pergola structure</p>
                            <input type="radio" name="fenceStyle" value="vinyl-pergola" id="vinyl-pergola">
                        </div>
                    </div>
                </div>

                <!-- Additional Services -->
                <div class="section">
                    <h2 class="section-title">Additional Services</h2>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="removal" name="services" value="removal">
                            <label for="removal">Old Fence Removal</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="staining" name="services" value="staining">
                            <label for="staining">Staining/Sealing</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="concrete" name="services" value="concrete">
                            <label for="concrete">Concrete Footings</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="grading" name="services" value="grading">
                            <label for="grading">Site Grading</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="permits" name="services" value="permits">
                            <label for="permits">Permit Assistance</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="warranty" name="services" value="warranty">
                            <label for="warranty">Extended Warranty</label>
                        </div>
                    </div>
                </div>

                <!-- Project Drawing -->
                <div class="section drawing-section">
                    <h2 class="section-title">Project Drawing</h2>
                    <p>Please draw a rough sketch of your property layout, including the fence location, gates, and any obstacles:</p>
                    
                    <div class="drawing-toolbar">
                        <button type="button" class="tool-btn active" onclick="setProjectTool('pen')">Pen</button>
                        <button type="button" class="tool-btn" onclick="setProjectTool('eraser')">Eraser</button>
                        <button type="button" class="tool-btn" onclick="setProjectTool('line')">Line</button>
                        <button type="button" class="tool-btn" onclick="setProjectTool('rectangle')">Rectangle</button>
                        <button type="button" class="tool-btn" onclick="setProjectTool('line')">Line</button>
                        <button type="button" class="tool-btn" onclick="setProjectTool('rectangle')">Rectangle</button>
                        <input type="color" class="color-picker" id="project-color-picker" value="#000000" onchange="setProjectColor(this.value)">
                        <div class="line-width-control">
                            <label for="project-line-width">Width:</label>
                            <input type="range" id="project-line-width" min="1" max="10" value="2" onchange="setProjectLineWidth(this.value)">
                            <span id="project-width-display">2</span>
                        </div>
                        <button type="button" class="tool-btn" onclick="clearProjectCanvas()">Clear</button>
                    </div>
                    
                    <div class="canvas-container">
                        <canvas id="first-page-drawing-canvas" width="760" height="400"></canvas>
                    </div>
                </div>

                <!-- Special Instructions -->
                <div class="section">
                    <h2 class="section-title">Special Instructions</h2>
                    <div class="form-group">
                        <label for="instructions">Additional Notes or Special Requirements</label>
                        <textarea id="instructions" name="instructions" placeholder="Please include any special requirements, access issues, preferred installation dates, or other important details..."></textarea>
                    </div>
                </div>

                <!-- Signature Section -->
                <div class="section signature-section">
                    <h2 class="section-title">Customer Signature</h2>
                    <p>Please sign below to confirm the accuracy of the information provided:</p>
                    <div class="signature-canvas-container">
                        <canvas id="signature-below-total-canvas" width="760" height="150"></canvas>
                    </div>
                    <button type="button" class="signature-clear" onclick="clearSignatureCanvas()">Clear Signature</button>
                </div>

                <!-- Total Section -->
                <div class="section total-section">
                    <h2 class="section-title">Estimated Total</h2>
                    <div class="total-amount" id="totalAmount">$0.00</div>
                    <p><em>*This is a preliminary estimate. Final pricing will be provided after site inspection.</em></p>
                </div>

                <button type="submit" class="submit-btn">Submit Quote Request</button>
            </form>
        </div>
    </div>

    <script>
        // Service Worker Registration
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then((registration) => {
                        console.log('SW registered: ', registration);
                    })
                    .catch((registrationError) => {
                        console.log('SW registration failed: ', registrationError);
                    });
            });
        }

        // Project Drawing Canvas Variables
        let projectCanvas, projectCtx, projectPreviewCanvas, projectPreviewCtx;
        let projectIsDrawing = false;
        let projectCurrentTool = 'pen';
        let projectCurrentColor = '#000000';
        let projectCurrentLineWidth = 2;
        let projectStartX, projectStartY;

        // Signature Canvas Variables
        let signatureCanvas, signatureCtx;
        let signatureIsDrawing = false;

        // Initialize Project Drawing Canvas
        function initializeProjectDrawingCanvas() {
            projectCanvas = document.getElementById('first-page-drawing-canvas');
            projectCtx = projectCanvas.getContext('2d');
            
            // Create preview canvas for real-time drawing feedback
            projectPreviewCanvas = document.createElement('canvas');
            projectPreviewCanvas.width = projectCanvas.width;
            projectPreviewCanvas.height = projectCanvas.height;
            projectPreviewCanvas.style.position = 'absolute';
            projectPreviewCanvas.style.top = '0';
            projectPreviewCanvas.style.left = '0';
            projectPreviewCanvas.style.pointerEvents = 'none';
            projectCanvas.parentNode.appendChild(projectPreviewCanvas);
            projectPreviewCtx = projectPreviewCanvas.getContext('2d');

            // Set up canvas properties
            projectCtx.lineCap = 'round';
            projectCtx.lineJoin = 'round';
            projectCtx.lineWidth = projectCurrentLineWidth;
            projectCtx.strokeStyle = projectCurrentColor;

            projectPreviewCtx.lineCap = 'round';
            projectPreviewCtx.lineJoin = 'round';

            // Add event listeners
            projectCanvas.addEventListener('mousedown', startProjectDrawing);
            projectCanvas.addEventListener('mousemove', projectDraw);
            projectCanvas.addEventListener('mouseup', stopProjectDrawing);
            projectCanvas.addEventListener('mouseout', stopProjectDrawing);

            // Touch events for mobile
            projectCanvas.addEventListener('touchstart', handleProjectTouch);
            projectCanvas.addEventListener('touchmove', handleProjectTouch);
            projectCanvas.addEventListener('touchend', stopProjectDrawing);
        }

        // Initialize Signature Canvas
        function initializeSignatureCanvas() {
            signatureCanvas = document.getElementById('signature-below-total-canvas');
            signatureCtx = signatureCanvas.getContext('2d');

            // Set up canvas properties for signature (pen only, black ink)
            signatureCtx.lineCap = 'round';
            signatureCtx.lineJoin = 'round';
            signatureCtx.lineWidth = 2;
            signatureCtx.strokeStyle = '#000000';

            // Add event listeners
            signatureCanvas.addEventListener('mousedown', startSignatureDrawing);
            signatureCanvas.addEventListener('mousemove', signatureDraw);
            signatureCanvas.addEventListener('mouseup', stopSignatureDrawing);
            signatureCanvas.addEventListener('mouseout', stopSignatureDrawing);

            // Touch events for mobile
            signatureCanvas.addEventListener('touchstart', handleSignatureTouch);
            signatureCanvas.addEventListener('touchmove', handleSignatureTouch);
            signatureCanvas.addEventListener('touchend', stopSignatureDrawing);
        }

        // Project Drawing Functions
        function startProjectDrawing(e) {
            projectIsDrawing = true;
            const rect = projectCanvas.getBoundingClientRect();
            projectStartX = e.clientX - rect.left;
            projectStartY = e.clientY - rect.top;

            if (projectCurrentTool === 'pen' || projectCurrentTool === 'eraser') {
                projectCtx.beginPath();
                projectCtx.moveTo(projectStartX, projectStartY);
            }
        }

        function projectDraw(e) {
            if (!projectIsDrawing) return;

            const rect = projectCanvas.getBoundingClientRect();
            const currentX = e.clientX - rect.left;
            const currentY = e.clientY - rect.top;

            if (projectCurrentTool === 'pen') {
                projectCtx.globalCompositeOperation = 'source-over';
                projectCtx.strokeStyle = projectCurrentColor;
                projectCtx.lineWidth = projectCurrentLineWidth;
                projectCtx.lineTo(currentX, currentY);
                projectCtx.stroke();
            } else if (projectCurrentTool === 'eraser') {
                projectCtx.globalCompositeOperation = 'destination-out';
                projectCtx.lineWidth = projectCurrentLineWidth * 2;
                projectCtx.lineTo(currentX, currentY);
                projectCtx.stroke();
            } else if (projectCurrentTool === 'line' || projectCurrentTool === 'rectangle') {
                // Clear preview canvas
                projectPreviewCtx.clearRect(0, 0, projectPreviewCanvas.width, projectPreviewCanvas.height);
                
                // Set preview properties
                projectPreviewCtx.strokeStyle = projectCurrentColor;
                projectPreviewCtx.lineWidth = projectCurrentLineWidth;
                projectPreviewCtx.globalCompositeOperation = 'source-over';

                if (projectCurrentTool === 'line') {
                    projectPreviewCtx.beginPath();
                    projectPreviewCtx.moveTo(projectStartX, projectStartY);
                    projectPreviewCtx.lineTo(currentX, currentY);
                    projectPreviewCtx.stroke();
                } else if (projectCurrentTool === 'rectangle') {
                    const width = currentX - projectStartX;
                    const height = currentY - projectStartY;
                    projectPreviewCtx.strokeRect(projectStartX, projectStartY, width, height);
                }
            } else if (projectCurrentTool === 'line' || projectCurrentTool === 'rectangle') {
                // Clear preview canvas
                projectPreviewCtx.clearRect(0, 0, projectPreviewCanvas.width, projectPreviewCanvas.height);
                
                // Set preview properties
                projectPreviewCtx.strokeStyle = projectCurrentColor;
                projectPreviewCtx.lineWidth = projectCurrentLineWidth;
                projectPreviewCtx.globalCompositeOperation = 'source-over';

                if (projectCurrentTool === 'line') {
                    projectPreviewCtx.beginPath();
                    projectPreviewCtx.moveTo(projectStartX, projectStartY);
                    projectPreviewCtx.lineTo(currentX, currentY);
                    projectPreviewCtx.stroke();
                } else if (projectCurrentTool === 'rectangle') {
                    const width = currentX - projectStartX;
                    const height = currentY - projectStartY;
                    projectPreviewCtx.strokeRect(projectStartX, projectStartY, width, height);
                }
            }
        }

        function stopProjectDrawing(e) {
            if (!projectIsDrawing) return;
            projectIsDrawing = false;

            if (projectCurrentTool === 'line' || projectCurrentTool === 'rectangle') {
                const rect = projectCanvas.getBoundingClientRect();
                const currentX = e.clientX - rect.left;
                const currentY = e.clientY - rect.top;

                // Draw final shape on main canvas
                projectCtx.globalCompositeOperation = 'source-over';
                projectCtx.strokeStyle = projectCurrentColor;
                projectCtx.lineWidth = projectCurrentLineWidth;

                if (projectCurrentTool === 'line') {
                    projectCtx.beginPath();
                    projectCtx.moveTo(projectStartX, projectStartY);
                    projectCtx.lineTo(currentX, currentY);
                    projectCtx.stroke();
                } else if (projectCurrentTool === 'rectangle') {
                    const width = currentX - projectStartX;
                    const height = currentY - projectStartY;
                    projectCtx.strokeRect(projectStartX, projectStartY, width, height);
                }

                // Clear preview canvas
                projectPreviewCtx.clearRect(0, 0, projectPreviewCanvas.width, projectPreviewCanvas.height);
            }

            if (projectCurrentTool === 'line' || projectCurrentTool === 'rectangle') {
                const rect = projectCanvas.getBoundingClientRect();
                const currentX = e.clientX - rect.left;
                const currentY = e.clientY - rect.top;

                // Draw final shape on main canvas
                projectCtx.globalCompositeOperation = 'source-over';
                projectCtx.strokeStyle = projectCurrentColor;
                projectCtx.lineWidth = projectCurrentLineWidth;

                if (projectCurrentTool === 'line') {
                    projectCtx.beginPath();
                    projectCtx.moveTo(projectStartX, projectStartY);
                    projectCtx.lineTo(currentX, currentY);
                    projectCtx.stroke();
                } else if (projectCurrentTool === 'rectangle') {
                    const width = currentX - projectStartX;
                    const height = currentY - projectStartY;
                    projectCtx.strokeRect(projectStartX, projectStartY, width, height);
                }

                // Clear preview canvas
                projectPreviewCtx.clearRect(0, 0, projectPreviewCanvas.width, projectPreviewCanvas.height);
            }
        }

        function handleProjectTouch(e) {
            e.preventDefault();
            const touch = e.touches[0];
            const mouseEvent = new MouseEvent(e.type === 'touchstart' ? 'mousedown' : 
                                            e.type === 'touchmove' ? 'mousemove' : 'mouseup', {
                clientX: touch.clientX,
                clientY: touch.clientY
            });
            projectCanvas.dispatchEvent(mouseEvent);
        }

        // Signature Drawing Functions
        function startSignatureDrawing(e) {
            signatureIsDrawing = true;
            const rect = signatureCanvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;

            signatureCtx.beginPath();
            signatureCtx.moveTo(x, y);
        }

        function signatureDraw(e) {
            if (!signatureIsDrawing) return;

            const rect = signatureCanvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;

            signatureCtx.lineTo(x, y);
            signatureCtx.stroke();
        }

        function stopSignatureDrawing() {
            signatureIsDrawing = false;
        }

        function handleSignatureTouch(e) {
            e.preventDefault();
            const touch = e.touches[0];
            const mouseEvent = new MouseEvent(e.type === 'touchstart' ? 'mousedown' : 
                                            e.type === 'touchmove' ? 'mousemove' : 'mouseup', {
                clientX: touch.clientX,
                clientY: touch.clientY
            });
            signatureCanvas.dispatchEvent(mouseEvent);
        }

        // Project Drawing Tool Functions
        function setProjectTool(tool) {
            projectCurrentTool = tool;
            
            // Update active button
            document.querySelectorAll('.drawing-toolbar .tool-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');

            // Update cursor
            if (tool === 'eraser') {
                projectCanvas.style.cursor = 'grab';
            } else {
                projectCanvas.style.cursor = 'crosshair';
            }
        }

        function setProjectColor(color) {
            projectCurrentColor = color;
        }

        function setProjectLineWidth(width) {
            projectCurrentLineWidth = parseInt(width);
            document.getElementById('project-width-display').textContent = width;
        }

        function clearProjectCanvas() {
            projectCtx.clearRect(0, 0, projectCanvas.width, projectCanvas.height);
            projectPreviewCtx.clearRect(0, 0, projectPreviewCanvas.width, projectPreviewCanvas.height);
        }

        // Signature Functions
        function clearSignatureCanvas() {
            signatureCtx.clearRect(0, 0, signatureCanvas.width, signatureCanvas.height);
        }

        // Fence style selection
        function selectFenceStyle(styleId) {
            // Remove selected class from all options
            document.querySelectorAll('.fence-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // Add selected class to clicked option
            event.currentTarget.classList.add('selected');
            
            // Check the radio button
            document.getElementById(styleId).checked = true;
            
            // Update pricing
            updatePricing();
        }

        // Pricing calculation
        function updatePricing() {
            const linearFeet = parseInt(document.getElementById('linearFeet').value) || 0;
            const gates = parseInt(document.getElementById('gates').value) || 0;
            const corners = parseInt(document.getElementById('corners').value) || 0;
            const selectedStyle = document.querySelector('input[name="fenceStyle"]:checked');
            
            let basePrice = 0;
            let gatePrice = 150;
            let cornerPrice = 25;
            
            if (selectedStyle) {
                const style = selectedStyle.value;
                
                // Base pricing per linear foot
                if (style.includes('wood')) {
                    if (style.includes('tongue-groove') || style.includes('horizontal')) {
                        basePrice = 35; // Premium wood styles
                    } else if (style.includes('privacy') || style.includes('stockade')) {
                        basePrice = 28; // Standard privacy
                    } else {
                        basePrice = 25; // Basic wood styles
                    }
                } else if (style.includes('vinyl')) {
                    if (style.includes('privacy')) {
                        basePrice = 45; // Vinyl privacy
                    } else {
                        basePrice = 40; // Standard vinyl
                    }
                }
            }
            
            // Calculate additional services
            let servicesPrice = 0;
            const services = document.querySelectorAll('input[name="services"]:checked');
            services.forEach(service => {
                switch(service.value) {
                    case 'removal': servicesPrice += linearFeet * 5; break;
                    case 'staining': servicesPrice += linearFeet * 3; break;
                    case 'concrete': servicesPrice += linearFeet * 8; break;
                    case 'grading': servicesPrice += 500; break;
                    case 'permits': servicesPrice += 200; break;
                    case 'warranty': servicesPrice += linearFeet * 2; break;
                }
            });
            
            const total = (linearFeet * basePrice) + (gates * gatePrice) + (corners * cornerPrice) + servicesPrice;
            document.getElementById('totalAmount').textContent = `$${total.toLocaleString()}.00`;
        }

        // Event listeners for pricing updates
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize canvases
            initializeProjectDrawingCanvas();
            initializeSignatureCanvas();
            
            // Add event listeners for pricing updates
            document.getElementById('linearFeet').addEventListener('input', updatePricing);
            document.getElementById('gates').addEventListener('input', updatePricing);
            document.getElementById('corners').addEventListener('input', updatePricing);
            
            // Add event listeners for service checkboxes
            document.querySelectorAll('input[name="services"]').forEach(checkbox => {
                checkbox.addEventListener('change', updatePricing);
            });
            
            // Form submission
            document.getElementById('quoteForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Get form data
                const formData = new FormData(this);
                
                // Get canvas data
                const projectDrawing = projectCanvas.toDataURL();
                const signature = signatureCanvas.toDataURL();
                
                // Add canvas data to form
                formData.append('projectDrawing', projectDrawing);
                formData.append('signature', signature);
                
                // Here you would typically send the data to your server
                alert('Quote request submitted successfully! We will contact you within 24 hours.');
                
                // For demo purposes, log the data
                console.log('Form submitted with data:', Object.fromEntries(formData));
            });
        });
    </script>
</body>
</html>